# Herokuとは
アプリケーションを簡単にデプロイするためのサービス。    
Herokuは、Railsなどの Webアプリケーションに必要なインフラ（APサーバーやDBサーバーなど）を    
まとめて提供してくれる非常に便利な PaaS（Platform as a Service）。    
通常では難しい設定が必要なデプロイをコマンド操作だけで簡単に実現してくれる。    

[![Image from Gyazo](https://i.gyazo.com/8224db1e63f3f41982b55443fc301a9d.png)](https://gyazo.com/8224db1e63f3f41982b55443fc301a9d)
***

# puroduction(本番)環境の DB設定
development(開発)環境、test環境では sqlite3を使っているが、
Herokuには postgresqlと言う DBが用意されてるので puroduction環境はそれを使う。

## Gemの追加
gem 'pg'を productionグループで追加する。
~~~
[gemfile]

# gem 'sqlite3', '~> 1.4' <= 環境毎に異なるデータベースを使うためコメントアウト

group :production do
  gem 'pg'
end
~~~
  
⚠️ bundle installするが、ローカルでは不要な本番環境用の gemをインストールしないよう、    
`--without production`オプションをつける。
~~~
$ bundle install --without production

⭐️ またbundleの設定が作成され、以降--without productionオプションが自動でつく
$ cat .bundle/config
---
BUNDLE_WITHOUT: "production"
~~~
***

## DBファイルの編集
production環境の DB内容を変える。
~~~
[config/database.yml]

development:
  <<: *default
  database: db/development.sqlite3

test:
  <<: *default
  database: db/test.sqlite3

production:
  <<: *default
  adapter: postgresql
  encoding: unicode
  pool: 5
~~~
- adapter    
データベースアダプタを指定していて、postgresqlアダプタは、PostgreSQLデータベースとの接続に使用される。
  
- encoding    
データベースの文字エンコーディングを指定している  
    
- pool    
データベースのコネクションプールの設定。    
同時にアクティブなデータベース接続の最大数を指定していて、この場合は最大で5つの同時接続が許可される。
***

#
