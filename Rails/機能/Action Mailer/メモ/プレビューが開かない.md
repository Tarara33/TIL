# â“ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé–‹ã‹ãªã„
ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç”¨ã«ã€ŒUserMailerã€ã‚’ä½œæˆã€‚
~~~
[app/mailers/user_mailer.rb]

class UserMailer < ApplicationMailer

  def reset_password_email(user)
    @user = User.find(user.id)
    @url = edit_password_resets_url(@user.reset_password_token)
    mail(to: user.email, subject: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç”³è«‹')
  end
end

-------------------------------------------------------------------------

[spec/mailers/previews/user_mailer_preview.rb]

# Preview all emails at http://localhost:3000/rails/mailers/user_mailer
class UserMailerPreview < ActionMailer::Preview
  def reset_password_email_preview
    user = User.first
    UserMailer.reset_password_email(user)
  end
end
~~~

rspecé…ä¸‹ã«ã‚ã‚‹ previewã§ ãƒ¡ãƒ¼ãƒ«ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç¢ºèªã—ã‚ˆã†ã¨ URLã‚’æ¨ã—ãŸãŒã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã€‚
~~~
Unknown action
Mailer preview 'user_mailer' not found
~~~
***

# ğŸ’¡ çµè«–: ãƒ†ã‚¹ãƒˆã‚’ Rspecã«ã—ãŸã“ã¨ãŒåŸå› 
ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã‚¯ãƒ©ã‚¹ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ test/mailers/previewsã«é…ç½®ã•ã‚Œã‚‹ã€‚  
ã—ã‹ã—ã€ä»Šå› Rspecã‚’å°å…¥ã—ã¦ã„ãŸ + specé…ä¸‹ã« previewãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã€æ¢ã›ãªã‹ã£ãŸã‚ˆã†ã ã€‚

ãªã®ã§ã€ previewãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¦ã‚ã’ã‚‹ã€‚
~~~
[config/application.rb]

# ãƒ¡ãƒ¼ãƒ©ãƒ¼ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’specãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹
config.action_mailer.preview_path = "#{Rails.root}/spec/mailers/previews"
~~~
ã“ã‚Œã§è§£æ±ºã—ãŸï¼
***
