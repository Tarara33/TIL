# FactoryBotãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©
FactoryBotã«ã‚‚ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®šç¾©ã§ãã‚‹ã€‚  
âš ï¸ æ‰±ã„ã¨ã—ã¦ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã«ãªã‚‹ã€‚
~~~
[spec/factories/microposts.rb]

FactoryBot.define do
  factory :post, class: Micropost do
    content { 'Writing a short test' }
    created_at { Time.zone.now }
    user { association :user, email: 'test@example.com' }
  end
end
 
def user_with_posts(posts_count: 5)
  FactoryBot.create(:user) do |user|
    FactoryBot.create_list(:post, posts_count, user: user)
  end
end
~~~
***

## ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã§
~~~
[spec/models/micropost_spec.rb]

FactoryBot.user_with_posts
~~~~
ã¨æ›¸ãã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚  
  
ãã®ãŸã‚ sendãƒ¡ã‚½ãƒƒãƒ‰ä½¿ã†ã€‚  
ğŸ’¡ [send](https://github.com/Tarara33/TIL/blob/main/Ruby/%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89/%E5%8D%98%E4%BD%93/send.md)ãƒ¡ã‚½ãƒƒãƒ‰ã¯å¼·åˆ¶çš„ã«ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã¦ä½¿ãˆã‚‹ã€‚
~~~
FactoryBot.send(:user_with_posts)
~~~
***

## â“ timesãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãƒ€ãƒ¡ï¼Ÿï¼Ÿ
ãƒ¡ã‚½ãƒƒãƒ‰ã«ã—ãªãã¦ã‚‚ã€timesãƒ¡ã‚½ãƒƒãƒ‰ã§ç¹°ã‚Šè¿”ã—ä½œã‚Œã°ã„ã„ã®ã§ã¯ï¼Ÿ
~~~
[spec/factories/microposts.rb]

5.times do
  FactoryBot.create(:posts)
end
~~~

#### ã—ã‹ã—ã€ä»Šå›ã®å ´åˆemailé‡è¤‡ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ï¼(â€» emailã‚«ãƒ©ãƒ ã« unique: trueã¤ã‘ã¦ã‚‹å ´åˆ)

ãªãœãªã‚‰ã€FactoryBotã§ã¯åŒä¸€ã® Factoryã‚’æŒ‡å®šã™ã‚‹ã¨ãã®åº¦ã« DBã¸ã®ä¿å­˜ãŒç™ºç”Ÿã™ã‚‹ã€‚    
ãªã®ã§ã€æœ€åˆã®ã‚³ãƒ¼ãƒ‰ä¾‹ã®ã‚ˆã†ã«[create_list](https://github.com/Tarara33/TIL/blob/main/Rails/Test/Factory/create_list.md)ã‚’ä½¿ç”¨ã—ãŸ Factoryç”Ÿæˆæ–¹æ³•ã§ã€é‡è¤‡ã—ã¦DBã¸ã®ä¿å­˜ãŒèµ°ã‚‰ãªã„ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚
***
