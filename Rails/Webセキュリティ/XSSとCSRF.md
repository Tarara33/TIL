[参考](https://qiita.com/wanko5296/items/142b5b82485b0196a2da)
    
# XSS (クロスサイトスクリプティング)
## XSSとは
一言でいうと、    
「ユーザーがWebページにアクセスすることで不正なスクリプトが実行されてしまう脆弱性または攻撃手法」のこと。
***

## 図で表すと
【前提】    
- WebアプリケーションにXSS脆弱性が存在する
    
[![Image from Gyazo](https://i.gyazo.com/5a8a65c8f4ea09cf8ba6cb247e9677bd.png)](https://gyazo.com/5a8a65c8f4ea09cf8ba6cb247e9677bd)
***

## XSSの被害例
- 攻撃者による不正ログイン（なりすまし）    
利用者のCookieが攻撃者の手に渡ることで、    
Cookie内にある利用者のセッション情報がそのまま使用されてしまい、    
利用者の名をかたってサービスを使用されてしまう危険性がある。
***

## XSS対策
- Webページに出力するデータのエスケープ処理    
Webページの出力に際して特別な意味を持つ文字列（例えば「<」、「&」など）は    
単なる文字列として出力するようにする。    
また、エスケープの対象としては、利用者が画面から入力した値はもちろん、    
外部システムからのデータなどWebページの出力対象となるものは必ずエスケープすることが重要。
***

# CSRF (クロスサイトリクエストフォージェリ)
## CSRFとは
一言でいうと、    
「Webアプリケーション利用者自身が意図しない処理が実行されてしまう脆弱性または攻撃手法」のこと。
***

## 図で表すと
【前提】    
- WebアプリケーションにCSRF脆弱性が存在する    
- 利用者はWebアプリケーションにログイン済みの状態であり、セッションを保持している

[![Image from Gyazo](https://i.gyazo.com/f9a878816bec5707637d1b60f8f23b21.png)](https://gyazo.com/f9a878816bec5707637d1b60f8f23b21)
***

## CSRFの被害例
- 利用者の意図しないWebアプリケーション上の処理実行    
図でも表したように、本来はログインした利用者のみが許される記事の投稿処理などがあげられる。
***

## CSRF対策
- Formページ返却時のトークン付与    
今回の例でいうと、はじめに掲示板への書き込み画面を表示する際に、    
サーバがクライアントに対して特定の文字列（トークン）を設定する。      
実際に書き込みのリクエストがあった際にサーバーが    
「この人に送ったトークンと同じトークンがリクエストに入ってる？」と確認することで、    
攻撃者からの不正なリクエストを防ぐことができる。    
これは、攻撃者は利用者に送信したトークンの値を知らないため。
***

## XSS と CSRFの違い
以下の表で「実行」との記載がある場合は、「不正な処理の実行」という意味で解釈してください。
[![Image from Gyazo](https://i.gyazo.com/993cbf236cb62b73645b57581fd0f61c.png)](https://gyazo.com/993cbf236cb62b73645b57581fd0f61c)
***
