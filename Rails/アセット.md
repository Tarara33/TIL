# アセットパイプライン とは
アセットパイプラインとは、Ruby on RailsにおいてJavaScriptファイル、スタイルシート、画像等（これらを総称してアセットと呼ぶ）   
を管理する仕組みのこと。

[![Image from Gyazo](https://i.gyazo.com/e864035c94343ad92a7b7e5e2b34ead6.png)](https://gyazo.com/e864035c94343ad92a7b7e5e2b34ead6)

- 高級言語のコンパイル    
coffeeScript, SCSS, ERB, Slimなどで記述されたコードをコンパイルしてブラウザが認識できるJavascript, CSSファイルとして扱う。

- アセットの連結     
複数のJavascript, CSSファイルを１つのファイルに連結することで読み込みに必要となるリクエストを減らし、    
全ての読み込みの時間を短縮する。

- アセットの最小化    
スペース、改行、コメントを削除してファイルを最小化する。
  
- ダイジェストの付与
コードの内容からハッシュ値を算出してファイルの末尾につける。    
このようにするとコードが変更された場合（ファイルが更新された場合）は、別名のファイルが新しく作成されて読み込むため、    
古いキャッシュの情報が使われることがなくなります。（修正が反映されないという問題を防げる）
***

## 環境による挙動の違い
- develpment(開発)環境    
1. 高級言語のコンパイル、ダイジェスト付与は逐次自動でされる。処理速度は遅いものの開発者は自分でコンパイル実行しなくていい。    
2.　 デバックのしやすさを考慮してアセットの連結や最小化はされない。   
3.　 アセットの連結をしてないため、ページのソース見るとファイルの数分のLINK、　Scriptタグが生成されてる
***

- production(本番)環境
1. アセットパイプラインの全行程がされるため、１つのJavascriptファイル、１つのCSSファイルを生成しておき、それを配信する。    
ページのソースを見るとdevelopment環境とは違いLINK、Scriptタグが１つずつ生成されてる。
***

# ブラウザにアセットを読み込ませる
アセットパイプラインでできたファイルをブラウザに出すには    
- `stylesheet_link_tag` 
- `javascript_include_tag`    
というヘルパーメソッドをビューファイルに使う(詳しくはヘルパーメソッドにまとめる)
この時共通ビューである「app/views/layouts/application.html.erb」とかに書く。
***
