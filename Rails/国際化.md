# gem rails-i18n　の追加
Gemfileに記載して $ bundle install   
⚠️gemをインストールするとgem内部の下記の一般的なメッセージについての    
日本語での国際化設定ファイルを参照するようになるので、「[i18n 日本語](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ja.yml)」    
上記の内容をコピーして config/locales/ja.yml というファイルをローカルに作る必要はなくなる。
***

# 国際化のフォルダ分け
「config/locals/」以下に国際化ファイル作るが、「ja.yml」など日本語のファイルです！と言語でまとめない方がいい。    
viewファイルの国際化ファイル、model,controllerファイルの国際化ファイルなどで分ける。    
***

# config/application.rbへの記述
~~~
[config/application.rb]
module RunteqNormal
  class Application < Rails::Application
    config.i18n.default_locale = :ja
    => デフォルトでは日本語読み込む
    config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}').to_s]
    => config/locals/ファイル名.rb or yml のファイルを読み込むとなる
  end
end
~~~
***

# ファイル見本
~~~
[config/locals/activerecord/ja.yml]

ja: =>言語設定
  activerecord:
    models:　=> テーブル名
      user: 'ユーザー'
      board: '掲示板'

    attributes:　=> カラム名
      user:
        first_name: '性'
        last_name: '名'
        email: 'メールアドレス'
        password: 'パスワード'
        password_confirmation: 'パスワード確認'

  attributes:　=>　activerecordと同じ階層にすると全テーブルに共通で使われる
    created_at: 作成日
    updated_at: 更新日
~~~
***
~~~
[config/locals/views/ja.yml]

ja: => 言語設定
  defaults:　=> 全viewページ共通
    login: 'ログイン'
    register: '登録'
    logout: 'ログアウト'
    
  users:　=> viewフォルダ名。　ここでいうとapp/view/usersになる
    new:　=> アクション名。　ここでいうとapp/view/users/newでの設定
      title: 'ユーザー登録'
      to_login_page: 'ログインページへ'
      
  user_sessions:
    new:
      title: 'ログイン'
      to_register_page: '登録ページへ'
      password_forget: 'パスワードをお忘れの方はこちら'
~~~
***

# viewファイルで国際化を反映させる
~~~
[app/view/users/new.html.erb]

<h1>Create User<h1>
このままだと国際化を読み込ませて変更することができないので
<h1><%= t '.title' %></h1>
こうすることで日本語で表示させたいなら
「config/locals/views/ja.yml」に記述した
view/usersのnewファイルの「title: 'ユーザー登録'」を読み込んでブラウザで表示してくれる。

<%= f.submit 'register', class: 'btn btn-primary' %>
ここも国際化するなら
<%= f.submit (t 'defaults.register'), class: 'btn btn-primary' %>
となる
~~~
***

## `t '.~' や　'~'` ドッドがつくのとつかない差　「lazy lookup記法」
~~~
<h1><%= t '.title' %></h1>は
t 'users.new.title' の省略形

yaml内がview#actionのカタチでキレイに定義されている場合、省略できる。
~~~
⚠️    
<%= f.submit (t 'defaults.register')...はview#actionのカタチではないので省略できない
***

# form_with　での国際化
- form_with(model:@user)など引数にモデルを渡している場合
~~~
[app/view/users/new.html.erb]

<%= form_with(model: @user, local: true) do |f| %>
        <div class="form-group">
          <%= f.label :last_name %>
          <%= f.text_field :last_name, class: 'form-control' %>
        </div>
        
Railsが定義を読み込んで「config/locals/activerecord/ja.yml」もなかの「userモデルのlast_name: '名'」を適用する。
~~~
***

- form_with(url: login_path)など引数にモデルを渡していない場合
~~~
[app/view/user_sessions/new.html.erb]

 <%= form_with(url: login_path, local: true) do |f| %>
        <div class="form-group">
          <%= f.label :email, User.human_attribute_name(:email) %>
          <%= f.text_field :email, class: 'form-control' %>
        </div>
            
i18nの記載を追加する必要があるので
モデル名.model_name.humanメソッドと
モデル名.human_attribute_name(:定義したやつ)メソッド
を読み込ませる。
~~~
***

## Model.model_name.human　と　Model.human_attribute_name(attribute)　のメソッドの違い
たとえば以下のような訳文がある。
~~~
en:
  activerecord:
    models:
      user: Customer
    attributes:
      user:
        login: "Handle"
      # Userの"login"属性は"Handle"という語に翻訳される
~~~
User.model_name.humanは”Customer”を返し、    
User.human_attribute_name("login")は”Handle”を返す。
***



