# テーブルの内容取得
~~~
SELECT カラム名　or *(全部)　FROM テーブル名;
~~~
***

## WHERE　を使う
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 WHERE カラム名 = 探したいワード

[例]select * from board where user_id = 1;
[例]select * from user where age >= 20;
=> 20歳以上の人を探す
[例]select * from user where name = "太郎";
=> 太郎を探す
~~~
***

## WHERE のオプション
- LIKE　　% や　`_`を使う
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 WHERE カラム名  LIKE = %探したいワード%
~~~
- "%文字%"...文字列のどこかにそのワードが入る文字列が探される
- "%文字"...文字列の最後が「〜文字」終わる文字列が探される
- "文字%"... 文字列の最初が「文字〜」で始まる文字列が探される
- `_`...指定する一文字にマッチする
~~~
[例]select * from user where name like = "%太郎%";
=> 「一太郎侍」とか見つかる
[例]select * from user where name like = "%太郎";
=> 「一太郎」とか見つかる
[例]select * from user where name like = "太郎%";
=> 「太郎侍」とか見つかる
[例]select * from user where name like = "_郎";
=> 「太郎」とか見つかる
[例]select * from user where name like = "郎_";
=> 「郎侍」とか見つかる
~~~

***

- AND
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 WHERE カラム名 = ""　AND WHERE カラム名 = "";

[例]select * from user where age >= 20 and where gender = "F";
=> 20歳以上の人 かつ（＆）　女性　を探す
~~~
***

- OR
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 WHERE カラム名 = ""　OR WHERE カラム名 = "";

[例]select * from user where age >= 20 or where gender = "F";
=> 20歳以上の人 か（or）　女性　を探す
~~~
***

- NOT
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 WHERE NOT カラム名 = ""　;
[例]select * from user where not gender = "F";
=> 　女性　ではない人を探す
~~~
***

- BETWEEN AND
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 WHERE カラム名 BETWEEN " " 　AND  " ";

[例]select * from fruits where price BETWEEN 200 AND 1000;
=> 200円以上1000円以下のものを探す
~~~
***

- IS NULL
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 WHERE カラム名 IS NULL;

[例]select * from fruits where price IS NULL;
=> priceが空値のものを探す
~~~
***


## カラムの平均の取得
~~~
SELECT AVG(カラム名) FROM テーブル名;

[例]select AVG（age） from user;
=> 年齢の平均値出す
~~~
***

## カラムの合計値の取得
~~~
SELECT SUM(カラム名) FROM テーブル名;

[例]select SUM（age） from user;
=> 年齢の合計値出す
~~~
***

## カラムの最大値の取得
~~~
SELECT MAX(カラム名) FROM テーブル名;

[例]select MAX（age） from user;
=> 年齢の最大値出す
~~~

***
## カラムの最小値の取得
~~~
SELECT MIN(カラム名) FROM テーブル名;

[例]select MIN（age） from user;
=> 年齢の最小値出す
~~~
***

## COUNT
~~~
SELECT COUNT(*) FROM テーブル名;
=> 行（レコード）の数を出す

SELECT COUNT(カラム名) FROM テーブル名;
=> 空値（NULL)を除く行数を出す

SELECT COUNT(DISTINCT カラム名) FROM テーブル名;
=> 空値（NULL)と重複行を除く行数を出す
~~~
***

# テーブルの結合
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 INNER JOIN 結合するテーブル名　ON　結合条件;

[例]select * from user inner join board on user.id = board.user_id;
~~~
***

# グループ化
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 GROUP BY カラム名;

[例]select avg(price) from fruits GROUP BY color;
=> カラー別に分けたフルーツの平均価格を表示
~~~
***

## グループ化後のオプション
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 GROUP BY カラム名 HAVING ;

[例]select avg(price) from fruits GROUP BY color having avg(price) >= 200;
=> カラー別に分けたフルーツの平均価格を出してさらに平均価格200円以上のカラーを表示
~~~
⚠️GROUP後はWHEREではなくHAVING
⚠️GROUP BYの時はSELECTで使えるのはGROUP BYに入れるカラムと集計関数のみ
***

## WHERE　と　HAVING
同じ動きだが、WHEREは表全体で検索するのに対してHAVINGはグループ化後の表で検索する
***

# 副問い合わせ　と　相関副問い合わせ
## 副問い合わせ
| 商品コード | 商品名 |　単価　|
----|----|---- 
| 101 | いちご | 150 |
| 102 | メロン | 800 |  

***
| 報告書コード | 商品コード |　個数　|
----|----|---- 
| 1101 | 101 | 300 |
| 1102 | 102 | 1100 |

~~~
[例]上記表から売上が1000個以上の商品名が知りたい

①SELECT *
FROM 商品表
WHERE 商品コード　IN （
  ②SELECT 商品コード
  FROM 売上表
  WHERE 個数 >= 1000);
~~~
この場合②を先に処理してその結果を使って①を処理する
***

## 相関副問い合わせ
| 報告書コード | 商品コード |　個数　|
----|----|---- 
| 1101 | 101 | 300 |
| 1102 | 102 | 1100 |

~~~
[例]商品ごとの売上平均個数を求め、その売上平均個数以下の明細項目を出す

①SELECT *
FROM 売上明細 U
③WHERE 個数 < (
  ②SELECT AVG(個数)
  FROM 売上明細
  WHERE 商品コード　= U.商品コード);
~~~
①の結果を②に入れて（この場合、WHERE 商品コード　= 101）処理をしてから③に入れて結果出す。   
この動きを一行ずつしている（なので二回目の②処理は、WHERE 商品コード　= 102）
***

# 表示するレコードの並び順を指定
~~~
SELECT カラム名　or *(全部)　FROM テーブル名 ORDER BY 並び替えの基準とするカラム名　DISC or ASC

[例]select * from board order by title asc;
~~~
- DESC...降順
- ASC...昇順
***

# テーブルにレコードを追加する
~~~
INSERT INTO テーブル名　　（カラム名１, カラム名２) VALUE("カラム名１の内容", "カラム名2の内容");
~~~
***

# レコードの内容を更新
~~~
UPDATE テーブル名　SET 更新するカラム名　= "更新内容" WHERE ID = 変更するレコードのid

[例]update user set first_name="daichi" where id = 1;
~~~
⚠️WHEREで設定しないと指定したカラム全部が同じように更新される
***

# レコードを削除
~~~
DELETE FROM テーブル名　WHERE ID　= 削除するレコードのid

[例]delete from user where id = 3;
~~~
⚠️WHEREで設定しないと全部削除されると思いきやエラー出た
***


